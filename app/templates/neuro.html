{% extends "base.html" %}

{% block title %}Предикатная форма - FOL Converter{% endblock %}

{% block content %}
<div class="main-content">

    <div class="main-form-container">
        <h1>Предложение → LLM предикатная форма </h1>
        
        <div class="neural-selection">
            <h3>Выберите нейросеть:</h3>
            <div class="pattern-tabs">
                <button class="tab-btn active" data-target="yandex-tab">Яндекс Нейро</button>
                <button class="tab-btn" data-target="gemma-tab">Gemma</button>
                <button class="tab-btn" data-target="giga-tab">Giga 3</button>
                <button class="tab-btn" data-target="ensemble-tab">Ансамбль</button>
            </div>
        </div>

        <form method="POST" id="predicate-form">
            <div class="input-wrapper">
                <label for="sentence">Введите предложение (английское):</label>
                <input type="text" id="sentence" name="sentence" 
                    placeholder="Например: Every man loves an apple"
                    value="{{ sentence or '' }}" required autocomplete="off">
            </div>
            <button type="submit">Преобразовать</button>
        </form>
    </div>

    <div class="examples-section">
        <h3>Примеры для тестирования:</h3>
        
        <div class="example-list">
            <div class="example-item" data-text="Every dog barks">Every dog barks</div>
            <div class="example-item" data-text="Some students are smart">Some students are smart</div>
            <div class="example-item" data-text="John loves Mary">John loves Mary</div>
            <div class="example-item" data-text="No cat eats vegetables">No cat eats vegetables</div>
            <div class="example-item" data-text="All humans are mortal">All humans are mortal</div>
        </div>
    </div>

    {% if sentence %}
    <div class="result-container results-wrapper">
        <h2>Результаты преобразования:</h2>

        <div class="result-container input-display">
            <h3>Входное предложение:</h3>
            <p>{{ sentence }}</p>
        </div>

        <div class="neural-results-container">
            <div id="yandex-tab" class="tab-content active">
                <div class="result-container neural-result">
                    <div class="neural-header">
                        <h3>Яндекс Нейро</h3>
                        <button class="copy-btn" data-target="yandex-result">Копировать</button>
                    </div>
                    <div class="predicate-formula" id="yandex-result">
                        {% if yandex_result %}
                            {{ yandex_result }}
                        {% else %}
                            <em>Ожидание ответа от нейросети...</em>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div id="gemma-tab" class="tab-content">
                <div class="result-container neural-result">
                    <div class="neural-header">
                        <h3>Gemma</h3>
                        <button class="copy-btn" data-target="gemma-result">Копировать</button>
                    </div>
                    <div class="predicate-formula" id="gemma-result">
                        {% if gemma_result %}
                            {{ gemma_result }}
                        {% else %}
                            <em>Ожидание ответа от нейросети...</em>
                        {% endif %}
                    </div>
                </div>
            </div>


            <div id="giga-tab" class="tab-content">
                <div class="result-container neural-result">
                    <div class="neural-header">
                        <h3>GigaChat Light</h3>
                        <button class="copy-btn" data-target="giga-result">Копировать</button>
                    </div>
                    <div class="predicate-formula" id="giga-result">
                        {% if giga_result %}
                            {{ giga_result }}
                        {% else %}
                            <em>Ожидание ответа от нейросети...</em>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div id="ensemble-tab" class="tab-content">
                <div class="result-container ensemble-result">
                    <div class="neural-header">
                        <h3>Ансамбль моделей</h3>
                        <button class="copy-btn" data-target="ensemble-result">Копировать</button>
                    </div>
                    <div class="ensemble-comparison">
                        <div class="ensemble-item">
                            <h4>Яндекс Нейро:</h4>
                            <div class="predicate-formula" id="ensemble-yandex">
                                {% if yandex_result %}
                                    {{ yandex_result }}
                                {% else %}
                                    <em>Нет данных</em>
                                {% endif %}
                            </div>
                        </div>
                        <div class="ensemble-item">
                            <h4>Gemma:</h4>
                            <div class="predicate-formula" id="ensemble-gemma">
                                {% if gemma_result %}
                                    {{ gemma_result }}
                                {% else %}
                                    <em>Нет данных</em>
                                {% endif %}
                            </div>
                        </div>
                        <div class="ensemble-item">
                            <h4>Giga 3:</h4>
                            <div class="predicate-formula" id="ensemble-giga">
                                {% if giga_result %}
                                    {{ giga_result }}
                                {% else %}
                                    <em>Нет данных</em>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="ensemble-consensus">
                        <h4>Консенсус:</h4>
                        <div class="predicate-formula" id="ensemble-result">
                            {% if ensemble_result %}
                                {{ ensemble_result }}
                            {% else %}
                                <em>Анализ результатов...</em>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    {% endif %}

</div>
{% endblock %}
